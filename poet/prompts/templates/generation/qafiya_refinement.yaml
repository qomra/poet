name: qafiya_refinement
description: "Fix rhyme scheme violations in Arabic poetry verses while preserving meaning"
template: |
  أنت خبير في القوافي العربية ومحترف في إصلاح القوافي الشعرية. مهمتك إصلاح البيت الشعري ليتوافق مع القافية المطلوبة مع الحفاظ على المعنى.
  
  **السياق والمعايير:**
  - البحر الشعري: {meter}
  - القافية المطلوبة: {qafiya}
  - نمط القافية المطلوب: {qafiya_pattern}
  - الموضوع: {theme}
  - النبرة: {tone}
  
  **البيت المطلوب إصلاحه:**
  {existing_verses}
  
  **المشكلة المحددة:**
  {context}
  
  **متطلبات الإصلاح:**
  1. إصلاح القافية لتكون: {qafiya_pattern}
  2. الحفاظ على المعنى الأساسي للبيت
  3. الحفاظ على الوزن العروضي
  4. الحفاظ على الموضوع والنبرة
  5. استخدام لغة عربية فصيحة
  6. تطبيق التشكيل العربي الصحيح
  
  **إرشادات تقنية:**
  - ركز على إصلاح القافية فقط (آخر كلمة في البيت)
  - لا تغير المعنى الأساسي للبيت
  - احتفظ بالكلمات الأساسية قدر الإمكان
  - يمكنك تعديل الكلمة الأخيرة أو إعادة صياغة نهاية البيت
  - تأكد من أن القافية تطابق النمط المطلوب بدقة
  - احتفظ بالوزن العروضي للبيت
  
  **أنماط القافية الشائعة:**
  - قافية مفتوحة: تنتهي بحرف مفتوح (مثل: قَ، عَ، لَ)
  - قافية مكسورة: تنتهي بحرف مكسور (مثل: قِ، عِ، لِ)
  - قافية مضمومة: تنتهي بحرف مضموم (مثل: قُ، عُ، لُ)
  - قافية ساكنة: تنتهي بحرف ساكن (مثل: قْ، عْ، لْ)
  
  **نمط الإجابة المطلوب:**
  أجب بالتنسيق التالي بدقة:
  ```json
  {{
    "verses": [
      "البيت المصحح - الصدر",
      "البيت المصحح - العجز"
    ],
    "explanation": "شرح موجز لإصلاح القافية",
    "original_qafiya": "القافية الأصلية",
    "new_qafiya": "القافية الجديدة",
    "changes_made": "التغييرات المطبقة"
  }}
  ```
  
  **قواعد التشكيل المطلوبة:**
  - ضع سكون (ْ) على اللام في ال (الْقَلْبِ)
  - لا تضع حركة على الشدة، الشدة فقط (مُحَمَّدٌ)
  - لا تضع شيئاً على حروف المد الساكنة (ا، و، ي، ى)
  - طبق الحركات المناسبة (َ، ِ، ُ) حسب القواعد النحوية والسياق
  - طبق التنوين (ً، ٍ، ٌ) حيث يلزم
  
  الآن قم بإصلاح القافية:
category: generation
parameters:
  - meter
  - qafiya
  - qafiya_pattern
  - theme
  - tone
  - existing_verses
  - context
metadata:
  version: "1.0"
  language: "arabic"
  complexity: "high"
  purpose: "qafiya_fix" 