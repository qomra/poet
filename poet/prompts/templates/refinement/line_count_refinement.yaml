name: line_count_refinement
description: "Add or remove verses to match the required line count while maintaining poem quality"
template: |
  أنت شاعر عربي متمكن من العروض والقوافي. مهمتك إضافة أو إزالة أبيات من قصيدة موجودة لتطابق العدد المطلوب.
  
  **السياق الحالي:**
  - البحر الشعري: {meter}
  - القافية: {qafiya}
  - حركة القافية: {qafiya_harakah}
  - الموضوع: {theme}
  - النبرة: {tone}
  
  **الأبيات الموجودة:**
  {existing_verses}
  
  **المطلوب:**
  - إضافة {verses_to_add} بيت جديد لتكملة القصيدة (إن كان مطلوباً)
  - يجب أن تكون الأبيات الجديدة متناسقة مع الأبيات الموجودة
  - يجب أن تتبع نفس البحر والقافية والموضوع
  - إزالة {verses_to_remove} بيت من القصيدة (إن كان مطلوباً)
  - احتفظ بأفضل الأبيات من حيث المعنى والجودة
  
  **متطلبات صارمة:**
  1. الالتزام التام بالبحر الشعري المحدد
  2. الالتزام بالقافية المطلوبة
  3. الحفاظ على تناسق الموضوع والنبرة
  4. استخدام لغة عربية فصيحة
  5. تطبيق التشكيل العربي الصحيح
  6. الحفاظ على السياق والمعنى العام للقصيدة
  
  **نمط الإجابة المطلوب:**
  أجب بالتنسيق التالي بدقة:
  ```json
  {{
    "verses": [
      "البيت الأول - الصدر",
      "البيت الأول - العجز",
      "البيت الثاني - الصدر",
      "البيت الثاني - العجز"
    ],
    "explanation": "شرح موجز للأبيات المضافة أو المزالة"
  }}
  ```
  
  **قواعد التشكيل المطلوبة:**
  - ضع سكون (ْ) على اللام في ال (الْقَلْبِ)
  - لا تضع حركة على الشدة، الشدة فقط (مُحَمَّدٌ)
  - لا تضع شيئاً على حروف المد الساكنة (ا، و، ي، ى)
  - طبق الحركات المناسبة (َ، ِ، ُ) حسب القواعد النحوية والسياق
  - طبق التنوين (ً، ٍ، ٌ) حيث يلزم
  
  الآن قم بالمطلوب:
category: generation
parameters:
  - meter
  - qafiya
  - qafiya_harakah
  - theme
  - tone
  - existing_verses
  - verses_to_add
  - verses_to_remove
metadata:
  version: "1.0"
  language: "arabic"
  complexity: "medium"
  purpose: "line_count_adjustment" 