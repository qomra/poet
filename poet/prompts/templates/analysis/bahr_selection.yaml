name: bahr_selection
description: Select and standardize bahr (meter) specification for poem generation
category: analysis
parameters:
  - original_prompt
  - current_meter
  - theme
  - tone
  - line_count
  - available_meters
  - missing_components
template: |
  أنت خبير في الشعر العربي وعلم العروض. مهمتك هي تحديد أو توحيد اسم البحر (المتر) المناسب للقصيدة المطلوبة.

  النص الأصلي للمستخدم:
  {original_prompt}

  المعلومات الحالية:
  - البحر الحالي: {current_meter}
  - الموضوع: {theme}
  - النبرة: {tone}
  - عدد الأبيات: {line_count}

  المكونات المفقودة: {missing_components}

  البحور المتاحة والمقترحة:
  {available_meters}

  تعليمات:
  1. إذا كان البحر محدداً ولكن بصيغة غير موحدة، قم بتوحيده إلى الصيغة الصحيحة
  2. إذا لم يكن البحر محدداً، اختر البحر الأنسب بناءً على الموضوع والنبرة وعدد الأبيات
  3. استخدم أسماء البحور باللغة العربية بالصيغة الكاملة (مثل "بحر الطويل" بدلاً من "طويل")
  4. إذا كان الموضوع غزل، فكر في البحور المناسبة للغزل مثل الكامل والطويل والهزج
  5. إذا كان الموضوع مدح أو فخر، فكر في البحور القوية مثل الوافر والطويل
  6. إذا كان الموضوع هجاء، فكر في البحور السريعة مثل الرجز والسريع
  7. للمبتدئين، اقترح البحور السهلة مثل الوافر والهزج
  8. للقصائد الطويلة، اقترح البحور المناسبة مثل الطويل والكامل

  أجب بتنسيق JSON فقط:
  ```json
  {{
    "meter_name": "اسم البحر الموحد",
    "explanation": "شرح سبب اختيار هذا البحر"
  }}
  ```

  أمثلة على الأسماء الصحيحة:
  - بحر الطويل
  - بحر الكامل
  - بحر الوافر
  - بحر الهزج
  - بحر الرجز
  - بحر الرمل
  - بحر السريع
  - بحر المنسرح
  - بحر الخفيف
  - بحر المضارع
  - بحر المقتضب
  - بحر المجتث
  - بحر المتقارب
  - بحر المحدث

  أمثلة على البحور المجزوءة:
  - بحر الكامل المجزوء
  - بحر الوافر المجزوء
  - بحر البسيط المجزوء
  - بحر الرجز المجزوء
  - بحر الرمل المجزوء
  - بحر السريع المشطور
  - بحر المنسرح المنهوك
  - بحر الخفيف المجزوء
  - بحر المتقارب المجزوء
  - بحر المحدث المجزوء 