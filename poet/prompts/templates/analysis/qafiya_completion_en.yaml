name: qafiya_completion_en
description: "Complete qafiya specification by filling missing components (English version)"
template: |
  You are an expert in Arabic poetry and qafiya (rhyme). Your task is to complete the qafiya specification by filling only the missing components.

  **Original Request:**
  {original_prompt}

  **Specified Constraints:**
  - Meter: {meter}
  - Theme: {theme}
  - Tone: {tone}
  - Era: {era}

  **Currently Specified Qafiya:**
  - Rhyme Letter: {existing_qafiya}
  - Vowel: {existing_harakah}
  - Type: {existing_type}
  - Type Description: {existing_type_description_and_examples}

  **Missing Components:**
  {missing_components}

  **Arabic Qafiya Types:**

  1) **Mutawatir (المتواتر)**: One vowel between two consonants; like the Dal in "جُودِ" from the poet's verse:
  يَجُودُ بِالنَّفْسِ إِنْ ضَنَّ الْجَوَادُ بِهَا وَالْجُودُ بِالنَّفْسِ أَقْصَى غَايَةِ الْجُودِ

  2) **Mutarakib (المتراكب)**: Three consecutive vowels between two consonants; like "فَرَجِ" in:
  إِذَا تَضَايَقَ أَمْرٌ فَانْتَظِرْ فَرَجًا فَأَضْيَقُ الْأَمْرِ أَدْنَاهُ إِلَى الْفَرَجِ

  3) **Mutadaarik (المتدارك)**: Two consecutive vowels between two consonants; like "بَرِ" in:
  مِحَنُ الْفَتَى يُخْبِرْنَ عَنْ فَضْلِ الْفَتَى وَالنَّارُ مُخْبِرَةٌ بِفَضْلِ الْعَنْبَرِ

  4) **Mutakaasis (المتكاوس)**: Four consecutive vowels between two consonants; like in:
  قَدْ جَبَرَ الدِّينَ الْإِلَهُ فَجُبِرْ

  5) **Mutaradif (المترادف)**: Two consonants together in the rhyme, specific to restricted rhymes; like Alif and Dal from "جوادْ" in Ibn al-Nabih's verse:
  النَّاسُ لَلْمَوْتِ كَخَيْلِ الطرَادْ فَالسَّابِقُ السَّابِقُ مِنْهَا الْجَوَادْ

  **Rules for Completing Qafiya:**

  1. **Respect Specified Components**: Do not change any previously specified component
  2. **Fill Only Missing Components**: Based on:
     - **Theme**: Ghazal needs emotional rhymes, satire needs strong rhymes
     - **Tone**: Sad themes need broken vowels, happy themes need open vowels
     - **Meter**: Some weights are more suitable for specific rhymes
     - **Era**: Classical rhymes differ from modern ones

  **Examples of Suitable Rhymes:**

  **For Love and Romance:**
  - ع (kasra): يَرْجِعِ، أَدْعِي
  - ر (damma): عَبَرُوا، سَفَرُ
  - ل (fatha): وَقَفَ، قُطُوفَا

  **For Satire and Anger:**
  - ق (damma): يَطْلُقُ، يَفْرَقُ
  - ح (kasra): يَصْدَحُ، يَنْفَحُ

  **For Sadness and Melancholy:**
  - ع (kasra): يَرْجِعِ، يَشْجَعِ
  - ن (kasra): يَحْزَنُ، يَطْمَعُ

  **Answer in the following format exactly:**
  ```json
  {{
    "qafiya_letter": "ع",
    "qafiya_harakah": "مكسور",
    "qafiya_type": "متواتر",
    "explanation": "Qafiya completed by filling missing components while preserving previously specified ones"
  }}
  ```

  **Important Notes:**
  - Respect all previously specified components
  - Fill only the missing components
  - Choose a qafiya suitable for the theme and tone
  - Ensure the qafiya will be easy to use in the poem

  **CRITICAL: Return ONLY the JSON response. Do NOT include any explanatory text, analysis, or markdown before or after the JSON.**

  Now complete the qafiya specification:
category: analysis
parameters:
  - original_prompt
  - meter
  - theme
  - tone
  - era
  - existing_qafiya
  - existing_harakah
  - existing_type
  - existing_type_description_and_examples
  - missing_components
metadata:
  version: "1.0"
  language: "english"
  complexity: "high"
  focus: "qafiya_completion" 