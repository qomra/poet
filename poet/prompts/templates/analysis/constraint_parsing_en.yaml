name: constraint_parsing
description: Parse user prompt to extract poetry constraints
language: english
category: analysis
template: |
  You are a specialist analyst in Arabic poetry. Your task is to analyze the user's request and extract constraints and requirements for the poem.

  User request:
  {user_prompt}

  Analyze the request and extract the following constraints:
  - Theme (theme)
  - Meter (meter)
  - Rhyme (qafiya)
  - Line count (line_count)
  - Tone (tone)
  - Imagery (imagery)
  - Keywords (keywords)

  Answer in JSON format only:


  {{
    "theme": "الموضوع المستخرج",
    "meter": "البحر المستخرج أو null",
    "qafiya": "القافية المستخرجة أو null",
    "line_count": عدد الأبيات أو null,
    "tone": "النبرة أو null",
    "imagery": ["صورة 1", "صورة 2"],
    "keywords": ["كلمة 1", "كلمة 2"]
  }}

  **Important: Answer with JSON object only. No other text before or after.**
